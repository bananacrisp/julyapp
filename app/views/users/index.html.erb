<div class="background-wrapper">
  <header></header>
  <section class="container">
    <article class="row">
      <section class="grid-6">
        <div class="inner">
          <h3>Users</h3>
          <table class="table table-condensed">
            <thead>
              <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Postcode</th>
                <th>Registered</th>
                <th>Role</th>
                <th>Last 4 Digits</th>
                <th>Customer ID</th>
                <th>Update Role?</th>
                <th>Delete User?</th>
              </tr>
            </thead>
            <tbody>
            <% @users.each do |user| %>
              <tr>
                <td><%= link_to user.name, user %></td>
                <td><%= user.email %></td>
                <td><%= user.postcode %></td>
                <td><%= user.created_at.to_date %></td>
                <td><%= user.roles.first.name.titleize unless user.roles.first.nil? %></td>
                <td><%= user.last_4_digits.to_s %></td>
                <td><%= user.customer_id %></td>
                <td>
                  <a data-toggle="modal" href="#role-options-<%= user.id %>" class="btn btn-mini" type="button">Change role</a>
                  <%= render user %>
                </td>
                <td><%= link_to("Delete user", user_path(user), :data => { :confirm => "Are you sure?" }, :method => :delete, :class => 'btn btn-mini') unless user == current_user %></td>
              </tr>
            <% end %>
            </tbody>
          </table>
        </div>
      </section>
    </article>
  </section>
</div>
